<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Quiz de Encaixe</title>
<style>
Â  body {
Â  Â  font-family: Arial, sans-serif;
Â  Â  background-color: #f0f3f7;
Â  Â  text-align: center;
Â  Â  padding: 20px;
Â  }

Â  h1 {
Â  Â  color: #2c3e50;
Â  }

Â  .config {
Â  Â  margin-bottom: 20px;
Â  }

Â  #game-area {
Â  Â  display: none;
Â  }

Â  #shadow-board, #pieces {
Â  Â  display: flex;
Â  Â  flex-wrap: wrap;
Â  Â  justify-content: center;
Â  Â  gap: 10px;
Â  Â  margin: 20px 0;
Â  }

Â  .shadow-slot {
Â  Â  width: 250px;Â 
Â  Â  height: 60px;
Â  Â  border: 2px dashed #ccc;
Â  Â  background-color: #ecf0f1;
Â  Â  display: flex;
Â  Â  align-items: center;
Â  Â  justify-content: center;
Â  Â  border-radius: 8px;
Â  Â  position: relative;Â 
Â  Â  padding-right: 25px;Â 
Â  Â  padding-left: 5px;Â 
Â  Â  text-align: left;Â 
Â  Â  font-size: 0.85em;Â 
Â  }

Â  .remove-icon {
Â  Â  position: absolute;
Â  Â  right: 5px;
Â  Â  top: 50%;
Â  Â  transform: translateY(-50%);
Â  Â  cursor: pointer;
Â  Â  font-weight: bold;
Â  Â  color: #e74c3c;Â 
Â  Â  font-size: 1.2em;
Â  Â  padding: 0 5px;
Â  Â  border-radius: 50%;
Â  Â  transition: background-color 0.2s;
Â  }
Â Â 
Â  .shadow-slot span {
Â  Â  Â  display: inline-block;
Â  Â  Â  max-width: 100%;
Â  Â  Â  overflow: hidden;
Â  Â  Â  text-overflow: ellipsis;
Â  Â  Â  white-space: normal;
Â  Â  Â  line-height: 1.2;
Â  }

Â  .remove-icon:hover {
Â  Â  background-color: rgba(231, 76, 60, 0.2);Â 
Â  }

Â  .shadow-slot.correct { background-color: #a8e6a3; }
Â  .shadow-slot.wrong { background-color: #f5a3a3; }

Â  .piece {
Â  Â  width: 150px;Â 
Â  Â  height: 50px;
Â  Â  background-color: #3498db;
Â  Â  color: white;
Â  Â  border-radius: 8px;
Â  Â  display: flex;
Â  Â  align-items: center;
Â  Â  justify-content: center;
Â  Â  cursor: grab;
Â  Â  font-size: 0.9em;Â 
Â  }

Â  .piece.used {
Â  Â  background-color: #7f8c8d;
Â  Â  cursor: not-allowed;
Â  }

Â  #timer {
Â  Â  font-size: 20px;
Â  Â  color: #e74c3c;
Â  Â  margin: 10px;
Â  }

Â  #result {
Â  Â  font-weight: bold;
Â  Â  margin-top: 20px;
Â  Â  font-size: 18px;
Â  }

Â  #ranking {
Â  Â  margin-top: 20px;
Â  Â  display: none;
Â  }
Â Â 
Â  .rank-highlight {
Â  Â  font-weight: bold;
Â  }

Â  .back-button {
Â  Â  position: fixed;
Â  Â  top: 15px;
Â  Â  left: 15px;
Â  Â  background-color: #95a5a6;
Â  Â  color: white;
Â  Â  padding: 8px 12px;
Â  Â  border-radius: 6px;
Â  Â  text-decoration: none;
Â  }

Â  #player-name-modal {Â 
Â  Â  display: none;
Â  }
Â  #rules-modal {
Â  Â  display: flex;
Â  }

Â  #player-name-modal, #rules-modal {Â 
Â  Â  position: fixed;
Â  Â  top: 0;
Â  Â  left: 0;
Â  Â  width: 100%;
Â  Â  height: 100%;
Â  Â  background-color: rgba(0, 0, 0, 0.7);Â 
Â  Â  justify-content: center;
Â  Â  align-items: center;
Â  Â  z-index: 1000;
Â  }

Â  .modal-content {
Â  Â  background-color: #ecf0f1;
Â  Â  padding: 30px;
Â  Â  border-radius: 10px;
Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
Â  Â  width: 80%;
Â  Â  max-width: 400px;
Â  Â  text-align: left;
Â  }

Â  .modal-content h2 {
Â  Â  color: #2c3e50;
Â  Â  margin-top: 0;
Â  Â  border-bottom: 2px solid #bdc3c7;
Â  Â  padding-bottom: 10px;
Â  Â  text-align: center;
Â  }

Â  #rules-text h3 {
Â  Â  Â  color: #3498db;
Â  Â  Â  margin-top: 20px;
Â  }
Â  #rules-text ul {
Â  Â  Â  padding-left: 20px;
Â  }

Â  .player-input-group {
Â  Â  margin-bottom: 15px;
Â  }

Â  .player-input-group label {
Â  Â  display: block;
Â  Â  margin-bottom: 5px;
Â  Â  font-weight: bold;
Â  Â  color: #34495e;
Â  }

Â  .player-input-group input {
Â  Â  width: 100%;
Â  Â  padding: 10px;
Â  Â  border: 1px solid #ccc;
Â  Â  border-radius: 5px;
Â  Â  box-sizing: border-box;Â 
Â  }

Â  #submitNames, #closeRules {
Â  Â  width: 100%;
Â  Â  padding: 10px;
Â  Â  background-color: #2ecc71;Â 
Â  Â  color: white;
Â  Â  border: none;
Â  Â  border-radius: 5px;
Â  Â  font-size: 1.1em;
Â  Â  cursor: pointer;
Â  Â  transition: background-color 0.2s;
Â  }

Â  #submitNames:hover, #closeRules:hover {
Â  Â  background-color: #27ae60;
Â  }
</style>
</head>
<body>

<a href="#" class="back-button" onclick="location.reload()">â† Reiniciar</a>

<h1 id="game-title">Quiz de Encaixe - Modo Single Player</h1>

<div class="config">
Â  <label>Modo de jogo:</label>
Â  <select id="numPlayers" onchange="updateTitle()">
Â  Â  <option value="1">Single Player</option>
Â  Â  <option value="2">2 Jogadores</option>
Â  Â  <option value="3">3 Jogadores</option>
Â  Â  <option value="4">4 Jogadores</option>
Â  </select>
Â  <div id="names"></div>
Â  <button onclick="startGame()">Iniciar Jogo</button>
</div>

<div id="game-area">
Â  <h2 id="currentPlayer"></h2>
Â  <div id="timer">Tempo: 5:00</div>
Â  <div id="shadow-board"></div>
Â  <div id="pieces"></div>
Â  <button id="verify" onclick="verificar()">Finalizar Tentativa</button>
Â  <div id="result"></div>
</div>

<div id="ranking"></div>

<div id="rules-modal">
Â  <div class="modal-content">
Â  Â  <h2>ğŸ† Regras do Quiz de Encaixe ğŸ§©</h2>
Â  Â  <div id="rules-text">
Â  Â  Â  <p>Este Ã© um jogo de encaixe de conceitos...</p>
Â  Â  Â Â 
Â  Â  Â  <h3>Como Funciona a PontuaÃ§Ã£o?</h3>
Â  Â  Â  <ul>
Â  Â  Â  Â  <li>1 ponto por resposta correta.</li>
Â  Â  Â  </ul>
Â  Â  </div>
Â  Â  <button id="closeRules" onclick="closeRulesAndShowConfig()">Entendi! ComeÃ§ar Jogo</button>
Â  </div>
</div>

<div id="player-name-modal">
Â  <div class="modal-content">
Â  Â  <h2>Insira os Nomes dos Jogadores</h2>
Â  Â  <div id="names-form"></div>
Â  Â  <button id="submitNames" onclick="submitNames()">ComeÃ§ar o Quiz</button>
Â  </div>
</div>

<script>
Â  const perguntas = [
Â  Â  { pergunta: "PeÃ§a mergulhada em metal fundido para evitar corrosÃ£o.", resposta: "ImersÃ£o a quente" },
Â  Â  { pergunta: "Corrente elÃ©trica deposita camada metÃ¡lica sobre a superfÃ­cie.", resposta: "EletrodeposiÃ§Ã£o" },
Â  Â  { pergunta: "Revestimento fÃ­sico, sem reaÃ§Ã£o quÃ­mica.", resposta: "PVD (DeposiÃ§Ã£o FÃ­sica no Vapor)" },
Â  Â  { pergunta: "Revestimento obtido por reaÃ§Ã£o quÃ­mica em fase gasosa.", resposta: "CVD (DeposiÃ§Ã£o QuÃ­mica no Vapor)" },
Â  Â  { pergunta: "Material fundido Ã© pulverizado sobre a peÃ§a.", resposta: "AspersÃ£o tÃ©rmica" },
Â  Â  { pergunta: "UniÃ£o de metal nobre sobre outro para proteger.", resposta: "Cladeamento (Cladding)" },
Â  Â  { pergunta: "Ãons sÃ£o inseridos na superfÃ­cie para aumentar dureza.", resposta: "ImplantaÃ§Ã£o iÃ´nica" },
Â  Â  { pergunta: "Endurece e melhora a superfÃ­cie sem alterar o interior.", resposta: "Tratamento a laser" },
Â  Â  { pergunta: "Cria camada protetora e melhora aderÃªncia de tintas.", resposta: "FosfatizaÃ§Ã£o" },
Â  Â  { pergunta: "Aumenta resistÃªncia e permite coloraÃ§Ã£o do alumÃ­nio.", resposta: "AnodizaÃ§Ã£o" },
Â  Â  { pergunta: "Revestimento quÃ­mico que evita corrosÃ£o.", resposta: "CromatizaÃ§Ã£o" },
Â  Â  { pergunta: "Revestimento de zinco para proteger o aÃ§o contra ferrugem.", resposta: "GalvanizaÃ§Ã£o" },
Â  Â  { pergunta: "Suaviza a superfÃ­cie por aÃ§Ã£o elÃ©trica e quÃ­mica.", resposta: "Polimento eletrolÃ­tico" },
Â  Â  { pergunta: "Introduz nitrogÃªnio na superfÃ­cie para endurecer o aÃ§o.", resposta: "NitretaÃ§Ã£o" },
Â  Â  { pergunta: "Forma Ã³xidos protetores na superfÃ­cie metÃ¡lica.", resposta: "OxidaÃ§Ã£o tÃ©rmica" }
Â  ];

Â  let currentPlayerIndex = 0;
Â  let players = [];
Â  let scores = [];
Â  let times = [];Â 
Â  let timerInterval;
Â  let totalTime = 300;Â 
Â  let timeLeft = totalTime;Â 

Â  let selectedNumPlayers = 1;

Â  function closeRulesAndShowConfig() {
Â  Â  Â  document.getElementById("rules-modal").style.display = "none";
Â  Â  Â  document.querySelector(".config").style.display = "block";Â 
Â  }

Â  /* â¬‡ï¸â¬‡ï¸ NOVO â€” toca a mÃºsica de fundo ao iniciar o jogo */
Â  function startGame() {
Â  Â  document.getElementById("bgm").play().catch(() => {
Â  Â  Â  Â  console.log("A mÃºsica serÃ¡ liberada apÃ³s interaÃ§Ã£o do usuÃ¡rio.");
Â  Â  });
Â  /* â¬†ï¸â¬†ï¸ */

Â  Â  selectedNumPlayers = parseInt(document.getElementById("numPlayers").value);
Â  Â  document.querySelector(".config").style.display = "none";

Â  Â  if (selectedNumPlayers === 1) {
Â  Â  Â  Â  players = ["Jogador"];
Â  Â  Â  Â  scores = [0];
Â  Â  Â  Â  times = [totalTime];
Â  Â  Â  Â  document.getElementById("game-area").style.display = "block";
Â  Â  Â  Â  iniciarRodada();
Â  Â  } else {
Â  Â  Â  Â  showNameModal(selectedNumPlayers);
Â  Â  }
Â  }

Â  function updateTitle() {
Â  Â  selectedNumPlayers = parseInt(document.getElementById("numPlayers").value);
Â  Â  const gameTitle = document.getElementById("game-title");
Â  Â  if (selectedNumPlayers === 1) {
Â  Â  Â  gameTitle.textContent = "Quiz de Encaixe - Modo Single Player";
Â  Â  } else {
Â  Â  Â  gameTitle.textContent = "Quiz de Encaixe - Modo Multiplayer";
Â  Â  }
Â  }

Â  function showNameModal(num) {
Â  Â  Â  const namesForm = document.getElementById("names-form");
Â  Â  Â  namesForm.innerHTML = "";
Â  Â  Â Â 
Â  Â  Â  for (let i = 1; i <= num; i++) {
Â  Â  Â  Â  Â  const group = document.createElement('div');
Â  Â  Â  Â  Â  group.className = 'player-input-group';
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const label = document.createElement('label');
Â  Â  Â  Â  Â  label.textContent = `Nome do Jogador ${i}:`;

Â  Â  Â  Â  Â  const input = document.createElement('input');
Â  Â  Â  Â  Â  input.type = 'text';
Â  Â  Â  Â  Â  input.id = `player${i}`;
Â  Â  Â  Â  Â  input.placeholder = `Nome do Jogador ${i}`;
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  group.appendChild(label);
Â  Â  Â  Â  Â  group.appendChild(input);
Â  Â  Â  Â  Â  namesForm.appendChild(group);
Â  Â  Â  }

Â  Â  Â  document.getElementById("player-name-modal").style.display = "flex";
Â  }

Â  function submitNames() {
Â  Â  Â  players = [];
Â  Â  Â  for (let i = 1; i <= selectedNumPlayers; i++) {
Â  Â  Â  Â  Â  const inputElement = document.getElementById(`player${i}`);
Â  Â  Â  Â  Â  let name = inputElement.value.trim();
Â  Â  Â  Â  Â  if (name === "") {
Â  Â  Â  Â  Â  Â  Â  name = `Jogador ${i}`;
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  players.push(name);
Â  Â  Â  }

Â  Â  Â  scores = new Array(selectedNumPlayers).fill(0);
Â  Â  Â  times = new Array(selectedNumPlayers).fill(0);Â 
Â  Â  Â Â 
Â  Â  Â  document.getElementById("player-name-modal").style.display = "none";
Â  Â  Â  document.getElementById("game-area").style.display = "block";
Â  Â  Â  iniciarRodada();
Â  }
Â Â 
Â  function iniciarRodada() {
Â  Â  document.getElementById("result").textContent = "";
Â  Â  const currentPlayer = players[currentPlayerIndex];
Â  Â  document.getElementById("currentPlayer").textContent = `Vez de: ${currentPlayer}`;
Â  Â  gerarPerguntas();
Â  Â  resetTimer();
Â  }

Â  function gerarPerguntas() {
Â  Â  const shadowBoard = document.getElementById("shadow-board");
Â  Â  const pieces = document.getElementById("pieces");
Â  Â  shadowBoard.innerHTML = "";
Â  Â  pieces.innerHTML = "";

Â  Â  perguntas.forEach((p, i) => {
Â  Â  Â  const slot = document.createElement("div");
Â  Â  Â  slot.className = "shadow-slot";
Â  Â  Â  slot.dataset.resposta = p.resposta;
Â  Â  Â  slot.textContent = p.pergunta;Â 
Â  Â  Â  slot.dataset.pergunta = p.pergunta;Â 

Â  Â  Â  slot.addEventListener("dragover", e => e.preventDefault());
Â  Â  Â  slot.addEventListener("drop", soltar);
Â  Â  Â Â 
Â  Â  Â  shadowBoard.appendChild(slot);
Â  Â  });

Â  Â  const respostasEmbaralhadas = [...perguntas]
Â  Â  Â  .sort(() => Math.random() - 0.5)
Â  Â  Â  .map(p => p.resposta);

Â  Â  respostasEmbaralhadas.forEach(resp => {
Â  Â  Â  const piece = document.createElement("div");
Â  Â  Â  piece.className = "piece";
Â  Â  Â  piece.textContent = resp;
Â  Â  Â  piece.draggable = true;
Â  Â  Â  piece.addEventListener("dragstart", e => {
Â  Â  Â  Â  e.dataTransfer.setData("text", resp);
Â  Â  Â  });
Â  Â  Â  pieces.appendChild(piece);
Â  Â  });
Â  }

Â  function soltar(e) {
Â  Â  e.preventDefault();Â 
Â  Â  const resposta = e.dataTransfer.getData("text");
Â  Â  const slot = e.target.closest('.shadow-slot');Â 
Â  Â  const piece = [...document.querySelectorAll(".piece")].find(p => p.textContent === resposta);

Â  Â  if (slot && !slot.dataset.userAnswer) {
Â  Â  Â  const questionText = document.createElement('span');
Â  Â  Â  questionText.textContent = slot.dataset.pergunta;

Â  Â  Â  const answerText = document.createElement('span');
Â  Â  Â  answerText.textContent = ` â†’ ${resposta}`;

Â  Â  Â  const removeIcon = document.createElement('span');
Â  Â  Â  removeIcon.textContent = 'X';
Â  Â  Â  removeIcon.classList.add('remove-icon');
Â  Â  Â Â 
Â  Â  Â  removeIcon.addEventListener('click', (event) => {
Â  Â  Â  Â  event.stopPropagation();Â 
Â  Â  Â  Â  removerResposta(slot);
Â  Â  Â  });

Â  Â  Â  slot.innerHTML = '';Â 
Â  Â  Â  slot.appendChild(questionText);
Â  Â  Â  slot.appendChild(answerText);
Â  Â  Â  slot.appendChild(removeIcon);
Â  Â  Â Â 
Â  Â  Â  slot.dataset.userAnswer = resposta;
Â  Â  Â  piece.classList.add("used");
Â  Â  Â  piece.draggable = false;
Â  Â  }
Â  }

Â  function removerResposta(slot) {
Â  Â  const respostaAntiga = slot.dataset.userAnswer;
Â  Â  if (!respostaAntiga) return;

Â  Â  const piece = [...document.querySelectorAll(".piece")].find(p => p.textContent === respostaAntiga);

Â  Â  if (piece) {
Â  Â  Â  piece.classList.remove("used");
Â  Â  Â  piece.draggable = true;
Â  Â  }

Â  Â  slot.innerHTML = '';Â 
Â  Â  slot.textContent = slot.dataset.pergunta;

Â  Â  delete slot.dataset.userAnswer;
Â  Â  slot.classList.remove("correct", "wrong");
Â  }

Â  function verificar() {
Â  Â  let acertos = 0;
Â  Â  document.querySelectorAll(".shadow-slot").forEach(slot => {
Â  Â  Â  const correta = slot.dataset.resposta;
Â  Â  Â  const resposta = slot.dataset.userAnswer;
Â  Â  Â  slot.classList.remove("correct", "wrong");
Â  Â  Â  if (resposta) {
Â  Â  Â  Â  if (resposta === correta) {
Â  Â  Â  Â  Â  acertos++;
Â  Â  Â  Â  Â  slot.classList.add("correct");
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  slot.classList.add("wrong");
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  });

Â  Â  scores[currentPlayerIndex] = acertos;
Â  Â  times[currentPlayerIndex] = totalTime - timeLeft;Â 
Â  Â Â 
Â  Â  const palavraPontuacao = acertos === 1 ? 'ponto' : 'pontos';
Â  Â Â 
Â  Â  document.getElementById("result").textContent = `VocÃª acertou ${acertos} de ${perguntas.length}! PontuaÃ§Ã£o: ${acertos} ${palavraPontuacao}.`;

Â  Â  clearInterval(timerInterval);
Â  Â  setTimeout(proximaRodada, 4000);
Â  }

Â  function resetTimer() {
Â  Â  clearInterval(timerInterval);
Â  Â  timeLeft = totalTime;Â 
Â  Â  updateTimer();
Â  Â  timerInterval = setInterval(() => {
Â  Â  Â  timeLeft--;
Â  Â  Â  updateTimer();
Â  Â  Â  if (timeLeft <= 0) {
Â  Â  Â  Â  clearInterval(timerInterval);
Â  Â  Â  Â  verificar();
Â  Â  Â  }
Â  Â  }, 1000);
Â  }

Â  function updateTimer() {
Â  Â  const min = Math.floor(timeLeft / 60);
Â  Â  const sec = String(timeLeft % 60).padStart(2, "0");
Â  Â  document.getElementById("timer").textContent = `Tempo: ${min}:${sec}`;
Â  }

Â  function proximaRodada() {
Â  Â  currentPlayerIndex++;
Â  Â  if (currentPlayerIndex < players.length) {
Â  Â  Â  iniciarRodada();
Â  Â  } else {
Â  Â  Â  mostrarRanking();
Â  Â  }
Â  }

Â  function mostrarRanking() {
Â  Â  const rankingDiv = document.getElementById("ranking");
Â  Â  rankingDiv.style.display = "block";
Â  Â  rankingDiv.innerHTML = "<h2>ğŸ† Ranking Final</h2>";

Â  Â  const ranking =
Â  Â  Â  players.map((p, i) => ({ nome: p, pontos: scores[i], tempo: times[i] }))
Â  Â  Â  .sort((a, b) => {
Â  Â  Â  Â  if (b.pontos !== a.pontos) return b.pontos - a.pontos;
Â  Â  Â  Â  return a.tempo - b.tempo;
Â  Â  Â  });

Â  Â  ranking.forEach((r, i) => {
Â  Â  Â  const tempoStr = r.tempo > 0 ? `(${r.tempo}s)` : '(Tempo mÃ¡ximo)';
Â  Â  Â  const palavraPontuacao = r.pontos === 1 ? 'ponto' : 'pontos';

Â  Â  Â  rankingDiv.innerHTML += `<p>${i + 1}Âº - ${r.nome}: <span class="rank-highlight">${r.pontos} ${palavraPontuacao}</span> ${tempoStr}</p>`;
Â  Â  });

Â  Â  document.getElementById("game-area").style.display = "none";
Â  }
</script>

<!-- ğŸ”Š MÃšSICA DE FUNDO -->
<audio id="bgm" src="dark.mp4" loop></audio>

</body>
</html>
